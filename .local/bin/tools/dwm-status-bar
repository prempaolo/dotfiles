#!/bin/sh

if [ "$(mpc status | grep playing)" = "" ]; then
	MPC=" ï€ "
	#MPC=" ğŸµ "
else
	MPC=" $(mpc status --format "ï€  %artist% - %title% ("$(mpc status | sed -n 2p | awk -F" " '{ print $3 }')")" | head -1)"
	#MPC=" $(mpc status --format "ğŸµ  %artist% - %title% ("$(mpc status | sed -n 2p | awk -F" " '{ print $3 }')")" | head -1)"
fi

DATE="$(date +"ï„³  %a"\ "%d"\ "%h "\|\ \ "ï€—  %H":"%M")"
#DATE="$(date +"ğŸ“… %a"\ "%d"\ "%h "\|\ \ "ğŸ•‘  %H":"%M")"

CAPACITY="$(cat /sys/class/power_supply/BAT0/capacity)"
STATUS="$(cat /sys/class/power_supply/BAT0/status)"
[ "$CAPACITY" -lt 20 ] && [ "$STATUS" = "Discharging" ] && notify-send -t 3000 -u critical "BATTERY LOW" "Attach it to your charger\!"
BAT_ICON="ï‰€"
#BAT_ICON="ğŸ”‹"
[ "$CAPACITY" -lt 80 ] && BAT_ICON="ï‰‚"
[ "$CAPACITY" -lt 30 ] && BAT_ICON="ï‰ƒ"
#[ "$STATUS" == "Charging" ] && BAT_ICON="ğŸ”Œ"
[ "$STATUS" = "Unknown" ] && BAT_ICON="ï‡¦"
[ "$STATUS" = "Charging" ] && BAT_ICON="ï‡¦"
BATTERY="$BAT_ICON  $CAPACITY% "

if [ "$(amixer get Master | awk -F'[][]' 'END{ print $4 }')" = "off" ]; then
	VOLUME="x $(amixer get Master | awk -F'[][]' 'END{ print $2 }')"
	#VOLUME="ğŸ›‘ $(amixer get Master | awk -F'[][]' 'END{ print $2 }')"
else
	VOLUME="ï€¨  $(amixer get Master | awk -F'[][]' 'END{ print $2 }')"
	#VOLUME="ğŸ”Š  $(amixer get Master | awk -F'[][]' 'END{ print $2 }')"
fi

CPU="ï„ˆ  $(top -b -n1 | grep "Cpu(s)" | awk '{print $2 + $4}')%"
#CPU="ğŸ–¥  $(top -b -n1 | grep "Cpu(s)" | awk '{print $2 + $4}')%"

RAM="ïˆ³  $(free -m | awk 'NR==2{printf "%s/%sMB\n", $3,$2 }')"
#RAM="ğŸ’¾  $(free -m | awk 'NR==2{printf "%s/%sMB\n", $3,$2 }')"

echo "[:] $MPC [;] $RAM [<] $CPU [=] $VOLUME [>] $DATE [=] $BATTERY "
